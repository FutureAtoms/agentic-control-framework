[INFO] Starting server with workspace root: <WORKSPACE_ROOT>
[INFO] Allowed directories for filesystem operations: <WORKSPACE_ROOT>
[INFO] Server ready and listening for requests
[DEBUG] Received request: {"jsonrpc":"2.0","id":1,"method":"tools/list","params":{}}
[DEBUG] Parsed request - Method: tools/list, ID: 1
[DEBUG] Handling tools/list request
{"jsonrpc":"2.0","id":1,"result":{"tools":[{"name":"setWorkspace","description":"Sets the workspace directory for the task manager.","inputSchema":{"type":"object","properties":{"workspacePath":{"type":"string","description":"The path to the workspace directory."}},"required":["workspacePath"]}},{"name":"initProject","description":"Initializes the task manager project.","inputSchema":{"type":"object","properties":{"projectName":{"type":"string","description":"Optional name for the project."},"projectDescription":{"type":"string","description":"Optional goal or description for the project."}}}},{"name":"addTask","description":"Adds a new task to the task list.","inputSchema":{"type":"object","properties":{"title":{"type":"string","description":"The title of the task."},"description":{"type":"string","description":"Optional description for the task."},"priority":{"type":"string","enum":["low","medium","high"],"description":"Optional priority (low, medium, high). Defaults to medium."},"dependsOn":{"type":"string","description":"Optional comma-separated string of task IDs it depends on."},"relatedFiles":{"type":"string","description":"Optional comma-separated string of relevant file paths."}},"required":["title"]}},{"name":"addSubtask","description":"Adds a subtask to a specified parent task.","inputSchema":{"type":"object","properties":{"parentId":{"type":"number","description":"The ID of the parent task."},"title":{"type":"string","description":"The title of the subtask."}},"required":["parentId","title"]}},{"name":"listTasks","description":"Lists tasks, optionally filtered by status.","inputSchema":{"type":"object","properties":{"status":{"type":"string","enum":["todo","inprogress","done","blocked","error"],"description":"Optional status to filter by."},"format":{"type":"string","enum":["json","table","human"],"description":"Optional output format. \"human\" provides a readable format with checkboxes."}}}},{"name":"updateStatus","description":"Updates the status of a task or subtask.","inputSchema":{"type":"object","properties":{"id":{"type":"string","description":"The ID of the task or subtask (e.g., 1 or 1.1)."},"newStatus":{"type":"string","enum":["todo","inprogress","done","blocked","error"],"description":"The new status."},"message":{"type":"string","description":"Optional message to add to the activity log."}},"required":["id","newStatus"]}},{"name":"getNextTask","description":"Gets the next actionable task based on status, dependencies, and priority.","inputSchema":{"type":"object","properties":{"random_string":{"type":"string","description":"Dummy parameter for no-parameter tools"}},"required":["random_string"]}},{"name":"updateTask","description":"Updates the details of a task or subtask.","inputSchema":{"type":"object","properties":{"id":{"type":"string","description":"The ID of the task or subtask."},"title":{"type":"string","description":"Optional new title."},"description":{"type":"string","description":"Optional new description (applies to main tasks)."},"priority":{"type":"string","enum":["low","medium","high"],"description":"Optional new priority (applies to main tasks)."},"relatedFiles":{"type":"string","description":"Optional comma-separated string of relevant file paths (replaces existing)."},"message":{"type":"string","description":"Optional message to add to the activity log."}},"required":["id"]}},{"name":"removeTask","description":"Removes a task or subtask by its ID.","inputSchema":{"type":"object","properties":{"id":{"type":"string","description":"The ID of the task or subtask to remove."}},"required":["id"]}},{"name":"getContext","description":"Retrieves detailed context for a specific task or subtask.","inputSchema":{"type":"object","properties":{"id":{"type":"string","description":"The ID of the task or subtask (e.g., 1 or 1.1)."}},"required":["id"]}},{"name":"generateTaskFiles","description":"Generates individual Markdown files for each task in the tasks/ directory.","inputSchema":{"type":"object","properties":{"random_string":{"type":"string","description":"Dummy parameter for no-parameter tools"}},"required":["random_string"]}},{"name":"parsePrd","description":"Parses a Product Requirements Document (PRD) file using the Gemini API to generate tasks.","inputSchema":{"type":"object","properties":{"filePath":{"type":"string","description":"Path to the PRD file to parse."}},"required":["filePath"]}},{"name":"expandTask","description":"Uses the Gemini API to break down a task into subtasks (overwrites existing subtasks).","inputSchema":{"type":"object","properties":{"taskId":{"type":"string","description":"The ID of the task to expand."}},"required":["taskId"]}},{"name":"reviseTasks","description":"Uses the Gemini API to revise future tasks based on a prompt/change, starting from a specific task ID.","inputSchema":{"type":"object","properties":{"fromTaskId":{"type":"string","description":"Task ID from which revision should start."},"prompt":{"type":"string","description":"User prompt describing the change."}},"required":["fromTaskId","prompt"]}},{"name":"generateTaskTable","description":"Generates a human-readable Markdown file with task statuses and checkboxes.","inputSchema":{"type":"object","properties":{"random_string":{"type":"string","description":"Dummy parameter for no-parameter tools"}},"required":["random_string"]}},{"name":"read_file","description":"Read the complete contents of a file from the file system or from a URL.","inputSchema":{"type":"object","properties":{"path":{"type":"string","description":"Path to the file to read or URL to fetch"},"isUrl":{"type":"boolean","description":"Whether the path is a URL (optional, auto-detected if starts with http:// or https://)"},"timeout":{"type":"number","description":"Timeout for URL requests in milliseconds (optional, default: 30000)"}},"required":["path"]}},{"name":"read_multiple_files","description":"Read the contents of multiple files in a single operation.","inputSchema":{"type":"object","properties":{"paths":{"type":"array","items":{"type":"string"},"description":"List of file paths to read"}},"required":["paths"]}},{"name":"write_file","description":"Create a new file or overwrite an existing file with new content.","inputSchema":{"type":"object","properties":{"path":{"type":"string","description":"Path where to write the file"},"content":{"type":"string","description":"Content to write to the file"}},"required":["path","content"]}},{"name":"copy_file","description":"Copy files and directories.","inputSchema":{"type":"object","properties":{"source":{"type":"string","description":"Source path of the file or directory"},"destination":{"type":"string","description":"Destination path"}},"required":["source","destination"]}},{"name":"move_file","description":"Move or rename files and directories.","inputSchema":{"type":"object","properties":{"source":{"type":"string","description":"Source path of the file or directory"},"destination":{"type":"string","description":"Destination path"}},"required":["source","destination"]}},{"name":"delete_file","description":"Delete a file or directory from the file system.","inputSchema":{"type":"object","properties":{"path":{"type":"string","description":"Path to the file or directory to delete"},"recursive":{"type":"boolean","description":"Whether to recursively delete directories (default: false)"}},"required":["path"]}},{"name":"list_directory","description":"Get a detailed listing of all files and directories in a specified path.","inputSchema":{"type":"object","properties":{"path":{"type":"string","description":"Path of the directory to list"}},"required":["path"]}},{"name":"create_directory","description":"Create a new directory or ensure a directory exists.","inputSchema":{"type":"object","properties":{"path":{"type":"string","description":"Path of the directory to create"}},"required":["path"]}},{"name":"tree","description":"Returns a hierarchical JSON representation of a directory structure.","inputSchema":{"type":"object","properties":{"path":{"type":"string","description":"Path of the directory to traverse"},"depth":{"type":"number","description":"Maximum depth to traverse (default: 3)"},"follow_symlinks":{"type":"boolean","description":"Whether to follow symbolic links (default: false)"}},"required":["path"]}},{"name":"search_files","description":"Recursively search for files and directories matching a pattern.","inputSchema":{"type":"object","properties":{"path":{"type":"string","description":"Starting path for the search"},"pattern":{"type":"string","description":"Search pattern to match against file names"}},"required":["path","pattern"]}},{"name":"get_file_info","description":"Retrieve detailed metadata about a file or directory.","inputSchema":{"type":"object","properties":{"path":{"type":"string","description":"Path to the file or directory"}},"required":["path"]}},{"name":"list_allowed_directories","description":"Returns the list of directories that this server is allowed to access.","inputSchema":{"type":"object","properties":{"random_string":{"type":"string","description":"Dummy parameter for no-parameter tools"}},"required":["random_string"]}},{"name":"get_filesystem_status","description":"Returns the current status of filesystem operations, including read-only mode and allowed directories.","inputSchema":{"type":"object","properties":{"random_string":{"type":"string","description":"Dummy parameter for no-parameter tools"}},"required":["random_string"]}},{"name":"get_config","description":"Get the complete server configuration as JSON","inputSchema":{"type":"object","properties":{"random_string":{"type":"string","description":"Dummy parameter for no-parameter tools"}},"required":["random_string"]}},{"name":"set_config_value","description":"Set a specific configuration value by key","inputSchema":{"type":"object","properties":{"key":{"type":"string","description":"Configuration key to set"},"value":{"description":"Value to set for the configuration key"}},"required":["key","value"]}},{"name":"execute_command","description":"Execute a terminal command with timeout","inputSchema":{"type":"object","properties":{"command":{"type":"string","description":"Command to execute"},"shell":{"type":"string","description":"Shell to use (optional)"},"timeout_ms":{"type":"number","description":"Timeout in milliseconds (optional)"}},"required":["command"]}},{"name":"read_output","description":"Read new output from a running terminal session","inputSchema":{"type":"object","properties":{"pid":{"type":"number","description":"Process ID of the running command"}},"required":["pid"]}},{"name":"force_terminate","description":"Force terminate a running terminal session","inputSchema":{"type":"object","properties":{"pid":{"type":"number","description":"Process ID to terminate"}},"required":["pid"]}},{"name":"list_sessions","description":"List all active terminal sessions","inputSchema":{"type":"object","properties":{"random_string":{"type":"string","description":"Dummy parameter for no-parameter tools"}},"required":["random_string"]}},{"name":"list_processes","description":"List all running processes","inputSchema":{"type":"object","properties":{"random_string":{"type":"string","description":"Dummy parameter for no-parameter tools"}},"required":["random_string"]}},{"name":"kill_process","description":"Terminate a running process by PID","inputSchema":{"type":"object","properties":{"pid":{"type":"number","description":"Process ID to kill"}},"required":["pid"]}},{"name":"search_code","description":"Search for text/code patterns within file contents using ripgrep","inputSchema":{"type":"object","properties":{"path":{"type":"string","description":"Starting path for the search"},"pattern":{"type":"string","description":"Search pattern"},"ignoreCase":{"type":"boolean","description":"Case insensitive search (default: true)"},"filePattern":{"type":"string","description":"File pattern filter (optional)"},"contextLines":{"type":"number","description":"Number of context lines (optional)"},"includeHidden":{"type":"boolean","description":"Include hidden files (optional)"},"maxResults":{"type":"number","description":"Maximum results (default: 100)"},"timeoutMs":{"type":"number","description":"Timeout in milliseconds (optional)"}},"required":["path","pattern"]}},{"name":"edit_block","description":"Apply surgical text replacements to files","inputSchema":{"type":"object","properties":{"file_path":{"type":"string","description":"Path to the file to edit"},"old_string":{"type":"string","description":"Text to replace"},"new_string":{"type":"string","description":"Replacement text"},"expected_replacements":{"type":"number","description":"Expected number of replacements (default: 1)"}},"required":["file_path","old_string","new_string"]}},{"name":"browser_navigate","description":"Navigate to a URL","inputSchema":{"type":"object","properties":{"url":{"type":"string","description":"The URL to navigate to"}},"required":["url"]}},{"name":"browser_navigate_back","description":"Go back to the previous page","inputSchema":{"type":"object","properties":{"random_string":{"type":"string","description":"Dummy parameter for no-parameter tools"}},"required":["random_string"]}},{"name":"browser_navigate_forward","description":"Go forward to the next page","inputSchema":{"type":"object","properties":{"random_string":{"type":"string","description":"Dummy parameter for no-parameter tools"}},"required":["random_string"]}},{"name":"browser_click","description":"Perform click on a web page","inputSchema":{"type":"object","properties":{"element":{"type":"string","description":"Human-readable element description"},"ref":{"type":"string","description":"Exact target element reference from the page snapshot"}},"required":["element","ref"]}},{"name":"browser_type","description":"Type text into editable element","inputSchema":{"type":"object","properties":{"element":{"type":"string","description":"Human-readable element description"},"ref":{"type":"string","description":"Exact target element reference"},"text":{"type":"string","description":"Text to type into the element"},"submit":{"type":"boolean","description":"Whether to submit entered text (press Enter after)"},"slowly":{"type":"boolean","description":"Whether to type one character at a time"}},"required":["element","ref","text"]}},{"name":"browser_hover","description":"Hover over element on page","inputSchema":{"type":"object","properties":{"element":{"type":"string","description":"Human-readable element description"},"ref":{"type":"string","description":"Exact target element reference"}},"required":["element","ref"]}},{"name":"browser_drag","description":"Perform drag and drop between two elements","inputSchema":{"type":"object","properties":{"startElement":{"type":"string","description":"Human-readable source element description"},"startRef":{"type":"string","description":"Exact source element reference"},"endElement":{"type":"string","description":"Human-readable target element description"},"endRef":{"type":"string","description":"Exact target element reference"}},"required":["startElement","startRef","endElement","endRef"]}},{"name":"browser_select_option","description":"Select an option in a dropdown","inputSchema":{"type":"object","properties":{"element":{"type":"string","description":"Human-readable element description"},"ref":{"type":"string","description":"Exact target element reference"},"values":{"type":"array","items":{"type":"string"},"description":"Array of values to select"}},"required":["element","ref","values"]}},{"name":"browser_press_key","description":"Press a key on the keyboard","inputSchema":{"type":"object","properties":{"key":{"type":"string","description":"Name of the key to press (e.g., ArrowLeft, a)"}},"required":["key"]}},{"name":"browser_take_screenshot","description":"Take a screenshot of the current page","inputSchema":{"type":"object","properties":{"element":{"type":"string","description":"Human-readable element description (optional)"},"ref":{"type":"string","description":"Element reference for element screenshot (optional)"},"filename":{"type":"string","description":"File name to save the screenshot (optional)"},"raw":{"type":"boolean","description":"Whether to return PNG format (default: false for JPEG)"}}}},{"name":"browser_snapshot","description":"Capture accessibility snapshot of the current page","inputSchema":{"type":"object","properties":{"random_string":{"type":"string","description":"Dummy parameter for no-parameter tools"}},"required":["random_string"]}},{"name":"browser_pdf_save","description":"Save page as PDF","inputSchema":{"type":"object","properties":{"filename":{"type":"string","description":"File name to save the PDF (optional)"}}}},{"name":"browser_console_messages","description":"Returns all console messages","inputSchema":{"type":"object","properties":{"random_string":{"type":"string","description":"Dummy parameter for no-parameter tools"}},"required":["random_string"]}},{"name":"browser_file_upload","description":"Upload one or multiple files","inputSchema":{"type":"object","properties":{"paths":{"type":"array","items":{"type":"string"},"description":"Array of file paths to upload"}},"required":["paths"]}},{"name":"browser_wait","description":"Wait for a specified time in seconds","inputSchema":{"type":"object","properties":{"time":{"type":"number","description":"Time to wait in seconds (max 10)"}},"required":["time"]}},{"name":"browser_wait_for","description":"Wait for text to appear or disappear or a specified time","inputSchema":{"type":"object","properties":{"text":{"type":"string","description":"Text to wait for to appear"},"textGone":{"type":"string","description":"Text to wait for to disappear"},"time":{"type":"number","description":"Time to wait in seconds"}}}},{"name":"browser_resize","description":"Resize the browser window","inputSchema":{"type":"object","properties":{"width":{"type":"number","description":"Width of the browser window"},"height":{"type":"number","description":"Height of the browser window"}},"required":["width","height"]}},{"name":"browser_handle_dialog","description":"Handle a dialog","inputSchema":{"type":"object","properties":{"accept":{"type":"boolean","description":"Whether to accept the dialog"},"promptText":{"type":"string","description":"Text for prompt dialogs (optional)"}},"required":["accept"]}},{"name":"browser_close","description":"Close the page","inputSchema":{"type":"object","properties":{"random_string":{"type":"string","description":"Dummy parameter for no-parameter tools"}},"required":["random_string"]}},{"name":"browser_install","description":"Install the browser specified in the config","inputSchema":{"type":"object","properties":{"random_string":{"type":"string","description":"Dummy parameter for no-parameter tools"}},"required":["random_string"]}},{"name":"browser_tab_list","description":"List browser tabs","inputSchema":{"type":"object","properties":{"random_string":{"type":"string","description":"Dummy parameter for no-parameter tools"}},"required":["random_string"]}},{"name":"browser_tab_new","description":"Open a new tab","inputSchema":{"type":"object","properties":{"url":{"type":"string","description":"URL to navigate to in the new tab (optional)"}}}},{"name":"browser_tab_select","description":"Select a tab by index","inputSchema":{"type":"object","properties":{"index":{"type":"number","description":"The index of the tab to select"}},"required":["index"]}},{"name":"browser_tab_close","description":"Close a tab","inputSchema":{"type":"object","properties":{"index":{"type":"number","description":"Index of the tab to close (optional, closes current if not provided)"}}}},{"name":"browser_network_requests","description":"Returns all network requests since loading the page","inputSchema":{"type":"object","properties":{"random_string":{"type":"string","description":"Dummy parameter for no-parameter tools"}},"required":["random_string"]}},{"name":"applescript_execute","description":"Run AppleScript code to interact with Mac applications and system features. This tool can access and manipulate data in Notes, Calendar, Contacts, Messages, Mail, Finder, Safari, and other Apple applications. Common use cases include but not limited to: - Retrieve or create notes in Apple Notes - Access or add calendar events and appointments - List contacts or modify contact details - Search for and organize files using Spotlight or Finder - Get system information like battery status, disk space, or network details - Read or organize browser bookmarks or history - Access or send emails, messages, or other communications - Read, write, or manage file contents - Execute shell commands and capture the output","inputSchema":{"type":"object","properties":{"code_snippet":{"type":"string","description":"Multi-line appleScript code to execute"},"timeout":{"type":"number","description":"Command execution timeout in seconds (default: 60)"}},"required":["code_snippet"]}}]}}
